---
title: docker深入
tags: docker 运维
---
## docker run 背后的操作：
>
1.检查本地是否存在指定的镜像，不存在从仓库下载；
2.利用镜像创建一个容器，并启动；
3.分配一个文件系统给容器，并在只读的镜像外层挂载一个可读写层；
4.从宿主主机配置的网桥接口中桥接一个虚拟接口到容器中去；
5.从网桥的地址池配置一个IP给容器；
6.执行用户指定的应用程序；
7.执行完毕后容器被自动终止；
## docker load vs docker import
> docker load导入镜像存储到本地镜像库
docker import导入一个容器快照到本地镜像库。
区别在于：容器快照文件会丢弃所有的历史记录和元数据信息，仅保存容器当时的快照状态，而镜像文件则保存完整记录，体积更大；
另外从容器导入快照文件可以重新指定标签等元数据信息；
![配置指令](/assets/images/dk1@2x.png)
![操作指令](/assets/images/dk2@2x.png)
![网络原理](/assets/images/net1@2x.png)
![网络原理](/assets/images/net2@2x.png)
![网络原理](/assets/images/net3@2x.png)
![网络原理](/assets/images/net4@2x.png)
![网络原理](/assets/images/net5@2x.png)
![网络原理](/assets/images/net6@2x.png)