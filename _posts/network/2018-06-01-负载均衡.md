---
title: 负载均衡
tags: 网络 负载均衡
---

### 分布式 VS 集群
```
分布式（distributed）是指在多台不同的服务器中部署不同的服务模块，通过远程调用协同工作，对外提供服务。
集群（cluster）是指在多台不同的服务器中部署相同应用或服务模块，构成一个集群，通过负载均衡设备对外提供服务。
常见的实现方式中，主要可以在应用层、传输层、网络层和数据传输层做文章。
所以，工作在应用层的负载均衡，我们通常称之为七层负载均衡、工作在传输层的我们称之为四层负载均衡。

大致可以分为以下几种，其中最常用的是四层和七层负载均衡：

二层负载均衡 

负载均衡服务器对外依然提供一个VIP（虚IP），集群中不同的机器采用相同IP地址，但是机器的MAC地址不一样。
当负载均衡服务器接受到请求之后，通过改写报文的目标MAC地址的方式将请求转发到目标机器实现负载均衡。

三层负载均衡

和二层负载均衡类似，负载均衡服务器对外依然提供一个VIP（虚IP），但是集群中不同的机器采用不同的IP地址。
当负载均衡服务器接受到请求之后，根据不同的负载均衡算法，通过IP将请求转发至不同的真实服务器。

四层负载均衡 

四层负载均衡工作在OSI模型的传输层，由于在传输层，只有TCP/UDP协议，这两种协议中除了包含源IP、目标IP以外
，还包含源端口号及目的端口号。四层负载均衡服务器在接受到客户端请求后，
以后通过修改数据包的地址信息（IP+端口号）将流量转发到应用服务器。

七层负载均衡 

七层负载均衡工作在OSI模型的应用层，应用层协议较多，常用http、radius、dns等。
七层负载就可以基于这些协议来负载。这些应用层协议中会包含很多有意义的内容。
比如同一个Web服务器的负载均衡，除了根据IP加端口进行负载外，还可根据七层的URL、浏览器类别、语言来决定是否要进行负载均衡。
```